create table address_home (
id int primary key auto_increment,
city varchar(255) not null,
post_code varchar(255) not null,
street varchar(255) not null,
building varchar(255) not null,
apartment varchar(255) not null,
to_apartment bool not null,
has_elevator bool not null,
user_id int not null
);

create table address_pickup (
id int primary key auto_increment,
department_code varchar(255)
);

create table product (
id int primary key auto_increment,
category_id int not null,
title varchar(255) not null,
price float not null,
amount_available int not null,
manufacturer_id int not null,
description text,
is_deleted bool not null default false
);

create table category (
id int primary key auto_increment,
name varchar(255) not null
);

create table manufacturer (
id int primary key auto_increment,
name varchar(255) not null
);

create table product_photo (
id int primary key auto_increment,
product_id int not null,
url varchar(255) not null
);

create table product_characteristic_value (
id int primary key auto_increment,
product_id int not null,
characteristic_id int not null,
characteristic_value_id int not null
);

create table characteristic (
id int primary key auto_increment,
name varchar(255) not null
);

create table characteristic_value (
id int primary key auto_increment,
characteristic_id int not null,
value varchar(255) not null
);

create table `order` (
id int primary key auto_increment,
user_id int not null,
employee_id int,
order_date timestamp not null,
delivery_date timestamp,
is_paid bool not null,
status varchar(255) not null,
delivery_type varchar(255) not null,
address_id int not null
);

create table order_item (
id int primary key auto_increment,
order_id int not null,
product_id int not null,
item_price float not null,
amount int not null
);

create table supply_list (
id int primary key auto_increment,
product_id int not null,
invoice_id int not null,
amount int not null,
item_price float not null
);

create table invoice (
id int primary key auto_increment,
supplier_id int not null,
order_date timestamp not null
);

create table supplier (
id int primary key auto_increment,
name varchar(255) not null,
address varchar(255) not null,
phone_number varchar(255),
email varchar(255),
checking_account_number varchar(255) not null,
is_deleted bool not null default false
);

create table user (
id int primary key auto_increment,
username varchar(255) not null,
password varchar(255) not null,
role int not null,
email varchar(255) not null,
phone varchar(255),
is_deleted bool not null default false
);

create table user_session (
id varchar(255) primary key,
user_id int not null,
expires_at datetime not null
);

create table role (
id int primary key auto_increment,
name varchar(255) not null
);


-- ADDING FOREGN KEYS

alter table user add foreign key (role) references role(id);
alter table user_session add foreign key (user_id) references user(id);
alter table order_item add foreign key (order_id) references `order`(id);
alter table order_item add foreign key (product_id) references product(id);
alter table product add foreign key (category_id) references category(id);
alter table product_photo add foreign key (product_id) references product(id);
alter table supply_list add foreign key (product_id) references product(id);
alter table product_characteristic_value add foreign key (product_id) references product(id);
alter table product add foreign key (manufacturer_id) references manufacturer(id);
alter table product_characteristic_value add foreign key (characteristic_id) references characteristic(id);
alter table product_characteristic_value add foreign key (characteristic_value_id) references characteristic_value(id);
alter table characteristic_value add foreign key (characteristic_id) references characteristic(id);
alter table supply_list add foreign key (invoice_id) references invoice(id);
alter table invoice add foreign key (supplier_id) references supplier(id);
alter table `order` add foreign key (user_id) references user(id);
alter table `order` add foreign key (employee_id) references user(id);
